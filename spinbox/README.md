# MVC 패턴

## MVC 패턴의 문제점

model과 view가 많아질수록 controller의 크기가 커진다.

## 예제 spinbox

+, - 버튼이 있고 그 버튼을 통해 결과값을 증가시키거나 감소시킬 수 있다. 결과값은 그때그때 화면에 반영된다.

### model

- 결과값에 대한 데이터를 가지고 있다.
- 외부에서는 데이터를 읽을 수만 있다.
- 데이터를 변경하기 위한 함수를 가지고 있다. (여기서는 증가, 감소)
- 접근가능한 public 함수를 통해서만 데이터에 접근할 수가 있다.

### View

- 화면을 렌더하는 함수를 가지고 있다.
- 여기서는 '.result' 요소의 텍스트를 변경하는 동작만 한다.

### Controller

- 모델과 뷰를 이어준다.
- 내부에 모델과 뷰의 인스턴스를 모두 가지고 있다.
- 내부에서 이벤트를 등록한다.

## 예제 spinbox의 느낀점

이런 패턴으로 구현하기 위해서 설계 단계에서 고민이 필요하다는 것을 알았다. UI가 있고 거기에 이벤트를 달고, 이벤트가 발생하면 무슨 일을 하고- 가 아니라, 각 동작들을 비슷한 역할끼리 구분하고 재사용 가능하게 하기 위해서 함수를 어떻게 작성할 것인지- 말이다. (가령 데이터를 증가, 감소시킬 때 증가, 감소값을 인자로 받을 것인지 말것인지) ~~물론 더 많은 고민들을 해야겠지만~~

### 객체지향 프로그래밍, 모듈 패턴, 클로저, 프로토타입에 대한 개념 활용은 덤

- **프로토타입**  
  모델, 뷰, 컨트롤러의 '동작'은 최대한 프로토타입의 메소드로 정의한다. 그러면 불필요한 메모리 낭비를 방지할 수 있다

- **클로저**  
  즉시 실행 함수나 생성자 함수 내부에서 변수나 함수를 정의하고 필요한 것들만 반환하여 외부에서 접근할 수 있게 하였고, 이로써 전역 변수를 줄일 수 있었다. 확실히 내부에서 'value'라는 변수명을 여러 곳에서 사용했지만 안전했다.

- **캡슐화**  
  (물론 복잡한 로직을 구현한 것은 아니었지만) 데이터를 증가시키는 것, 감소시키는 것 등의 세부 과정을 사용하는 측(컨트롤러)에서 몰라도 되었고, 훨씬 코드가 깔끔해지는 걸 볼 수 있었다.

### MVC, 각 요소의 역할에 대한 감을 잡을 수 있었다.

누구도 그렇게 말해준 사람은 없었지만, '모델-컨트롤러-뷰'의 역할이 '데이터-로직-UI'로 칼같이 구분되는 줄 알았다. 각 요소 역할을 정확히 이해하지 못해 내 멋대로 편하게 이해해버렸다.

막상 직접 MVC 패턴으로 작성해보니,  
모델은 데이터와 데이터 관련한 로직을 담당하고, 뷰는 화면을 그리는 역할, 컨트롤러는 둘을 연결시켜주는 역할이라고 정의하는 것이 훨씬 맞는 표현같다. (결국 다시 했던 말을 반복하는 것 같지만)

### 적은 Model과 View로도 확실히 크기가 커지는 Controller

큰 애플리케이션을 경험해본 것은 아니지만 나머지 둘을 이어주는 역할의 컨트롤러는 확실히 빠르게 커질 것 같았다.

## Q&A

### 모델의 data를 읽기 전용으로 할 수 있을까?

지금은 모델의 인스턴스에서 data에 직접 접근할 수 있고 직접 변경할 수도 있다. 이 부분을 모델의 메소드를 통해서, 정해진 규칙 안에서만 data를 변경할 수 있도록 하려면 어떻게 해야할까?

## 그 대안, Flux pattern
